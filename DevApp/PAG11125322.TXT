OBJECT Page 11125322 Estimate Card NEW
{
  OBJECT-PROPERTIES
  {
    Date=;
    Time=;
    Version List=4PS9.00;
  }
  PROPERTIES
  {
    CaptionML=ENU=Estimate;
    SourceTable=Table11012151;
    SourceTableView=WHERE(RAW Estimate=CONST(No),
                          Converted=CONST(Yes));
    OnOpenPage=BEGIN
                 //**4PS Generated Code. Do Not Change.sn01
                 DPA_IsHardFilter := DPA_SetFilters(CurrPage.OBJECTID(FALSE));
                 //**4PS Generated Code.en01
                 EstSetup.GET;
                 IF EstSetup."Rates Based On" = EstSetup."Rates Based On"::"Rate Group" THEN
                   RateEditable := TRUE
                 ELSE
                   RateEditable := FALSE;

                 SETRANGE("Estimate Project", FALSE);  //22685
               END;

    OnAfterGetRecord=BEGIN
                       SETRANGE("No.");
                     END;

    OnNewRecord=BEGIN
                  //**4PS Generated Code. Do Not Change.sn02
                  DPA_SetDefaultDepartment;
                  //**4PS Generated Code.en02
                END;

    OnInsertRecord=VAR
                     xRecRef@1100528900 : RecordRef;
                   BEGIN
                     //**4PS Generated Code. Do Not Change.sn05
                     xRecRef.GETTABLE(xRec);
                     DPA_SetDefaultDpmtFromNoSeries(xRecRef);
                     //**4PS Generated Code.en05
                   END;

    OnAfterGetCurrRecord=VAR
                           RecRef@1100528900 : RecordRef;
                         BEGIN
                           RecRef.GETTABLE(Rec);
                           CurrPage.RegisterExternalDocumentFB.PAGE.SetRecordReference(RecRef);
                           CurrPage.RegisterExternalDocumentFB.PAGE.SetByCompany(TRUE);
                           CurrPage.RegisterExternalDocumentFB.PAGE.SetDepartmentCode("Global Dimension 1 Code");

                           TotalCost := "Labor Cost Amount" + "Material Cost Amount" + "Subcontracting Cost Amount" +
                             "Plant Cost Amount" + "Sundry Cost Amount";  //DP00381
                           TotalSales := "Labor Sales Amount" + "Material Sales Amount" + "Subcontracting Sales Amount" +
                             "Plant Sales Amount" + "Sundry Sales Amount";  //DP00381
                         END;

    ActionList=ACTIONS
    {
      { 1100528902;  ;ActionContainer;
                      ActionContainerType=RelatedInformation }
      { 1100529054;1 ;ActionGroup;
                      CaptionML=ENU=&Estimate }
      { 1100529055;2 ;ActionGroup;
                      CaptionML=ENU=Amounts;
                      Image=Costs }
      { 1100528996;3 ;Action    ;
                      Name=&Rates;
                      CaptionML=ENU=&Rates;
                      RunObject=Page 11012168;
                      RunPageLink=Estimate No.=FIELD(No.);
                      Image=Cost }
      { 1100528600;3 ;Action    ;
                      CaptionML=ENU=Exchange Rates;
                      RunObject=Page 11229324;
                      RunPageLink=Estimate Filter=FIELD(No.);
                      Image=AdjustExchangeRates }
      { 1100528903;3 ;Action    ;
                      Name=OfferAmounts;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=ENU=Offer Amounts;
                      RunObject=Page 11229778;
                      RunPageLink=Estimate No.=FIELD(No.);
                      Image=ContractPayment }
      { 1100529056;2 ;ActionGroup;
                      CaptionML=ENU=Persons;
                      Image=ContactPerson }
      { 1100528998;3 ;Action    ;
                      Name=Principals;
                      CaptionML=ENU=Principals;
                      RunObject=Page 11012173;
                      RunPageLink=Estimate No.=FIELD(No.);
                      Image=TeamSales }
      { 1100528997;3 ;Action    ;
                      Name=Responsible Persons;
                      CaptionML=ENU=Responsible Persons;
                      RunObject=Page 11012169;
                      RunPageLink=Estimate No.=FIELD(No.);
                      Image=Users }
      { 1100529057;2 ;ActionGroup;
                      CaptionML=ENU=Try-out;
                      Image=Quote }
      { 1100529005;3 ;Action    ;
                      Name=Try-out;
                      CaptionML=ENU=Try-out;
                      Image=Document;
                      OnAction=BEGIN
                                 ShowTryOut(1);
                               END;
                                }
      { 1100529006;3 ;Action    ;
                      Name=Try-out &Quote;
                      CaptionML=ENU=Try-out &Quote;
                      Image=Quote;
                      OnAction=BEGIN
                                 ShowTryOut(2);
                               END;
                                }
      { 1100525000;2 ;ActionGroup;
                      CaptionML=ENU=Estimate;
                      Image=Calculate }
      { 1100528911;3 ;Action    ;
                      Name=Estimate Index;
                      ShortCutKey=Ctrl+F5;
                      CaptionML=ENU=Estimate Index;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=BOMVersions;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 ShowIndex("No.",'','','',FALSE);  //DP00909
                               END;
                                }
      { 1100529051;3 ;Action    ;
                      Name=Sub-Estimates;
                      ShortCutKey=Ctrl+Q;
                      CaptionML=ENU=Sub-Estimates;
                      Description=DP00909 (option disabled);
                      Promoted=Yes;
                      Visible=FALSE;
                      PromotedIsBig=Yes;
                      Image=Splitlines;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 SubEstimate@1100525000 : Record 11072074;
                                 SubEstimatesSubForm@1100525001 : Page 11125320;
                               BEGIN
                                 SubEstimate.FILTERGROUP(4);  //C016687
                                 SubEstimate.SETRANGE("Estimate No.", "No.");
                                 SubEstimate.FILTERGROUP(0);
                                 SubEstimatesSubForm.SETTABLEVIEW(SubEstimate);
                                 SubEstimatesSubForm.RUN;  //C017535
                               END;
                                }
      { 1100529010;3 ;Action    ;
                      Name=Estimate Lines;
                      CaptionML=ENU=Estimate Lines;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Calculate;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 StartEstimateLines;  //DP00909
                               END;
                                }
      { 1100529003;3 ;Action    ;
                      Name=Summaries;
                      CaptionML=ENU=Summaries;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=Worksheet;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 CheckSummaryPresent;  //db, 25-05-10: M19426
                               END;
                                }
      { 1100528401;3 ;Action    ;
                      Name=Estimate Recipes;
                      CaptionML=ENU=Estimate Recipes;
                      Image=List;
                      PromotedCategory=Process;
                      OnAction=VAR
                                 EstimateLine@1100528400 : Record 11072072;
                                 EstimateLineList@1100528401 : Page 11125325;
                               BEGIN
                                 EstimateLine.SETRANGE("Estimate No.", "No.");
                                 EstimateLine.SETFILTER("Recipe Group", STRSUBSTNO('<>%1', ''''''));
                                 EstimateLine.SETFILTER(Recipe, STRSUBSTNO('<>%1', ''''''));
                                 EstimateLineList.SETTABLEVIEW(EstimateLine);
                                 EstimateLineList.RUN;
                               END;
                                }
      { 1100528904;3 ;Action    ;
                      Name=Co&mments;
                      CaptionML=ENU=Co&mments;
                      RunObject=Page 124;
                      RunPageLink=Table Name=CONST(Estimate),
                                  No.=FIELD(No.);
                      Image=ViewComments }
      { 1100529007;2 ;Action    ;
                      Name=Documents;
                      CaptionML=ENU=&Documents;
                      Image=Documents;
                      OnAction=VAR
                                 RecRef@1100528901 : RecordRef;
                                 DocumentFilters@1100528900 : Codeunit 11012432;
                               BEGIN
                                 RecRef.GETTABLE(Rec);
                                 DocumentFilters.CreateTempFilterAndExecute1(RecRef, "Global Dimension 1 Code", FALSE, TRUE);
                               END;
                                }
      { 1100529000;2 ;Action    ;
                      Name=To-dos;
                      CaptionML=ENU=To-dos;
                      RunObject=Page 5096;
                      RunPageView=SORTING(Estimate No.,Date,Closed);
                      RunPageLink=Estimate No.=FIELD(No.),
                                  System To-do Type=CONST(Organizer);
                      Image=NewToDo }
      { 1100528999;2 ;Action    ;
                      Name=House &Models;
                      CaptionML=ENU=House &Models;
                      RunObject=Page 11012251;
                      RunPageLink=Estimate No.=FIELD(No.);
                      Image=Warehouse }
      { 1100529004;2 ;Action    ;
                      Name=Graph;
                      CaptionML=ENU=Graph;
                      Image=AnalysisView;
                      OnAction=BEGIN
                                 CUGraph.Estimate(Rec);
                               END;
                                }
      { 1100529008;  ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 1100529040;1 ;ActionGroup;
                      CaptionML=ENU=F&unctions }
      { 1100529039;2 ;ActionGroup;
                      CaptionML=ENU=Copy+Transfer;
                      Image=Copy }
      { 1100529036;3 ;Action    ;
                      Name=CopyEstimate;
                      CaptionML=ENU=Copy Estimate;
                      Promoted=Yes;
                      Image=Copy;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 StartCopyEstimate(FALSE);  //C027531: db, 24-12-15
                               END;
                                }
      { 1100529038;3 ;Action    ;
                      Name=TransferEstimateToProject;
                      CaptionML=ENU=Copy Estimate to Project Budget;
                      RunObject=Page 11012187;
                      RunPageLink=No.=FIELD(No.);
                      Promoted=Yes;
                      Image=Copy;
                      PromotedCategory=Process }
      { 1100529037;3 ;Action    ;
                      Name=TransferEstimateToService;
                      CaptionML=ENU=Copy Estimate to Service;
                      Image=Copy;
                      OnAction=VAR
                                 ServiceSetup@1100528600 : Record 11012800;
                               BEGIN
                                 IF ServiceSetup.READPERMISSION THEN
                                   ServiceSetup.GET;

                                 PAGE.RUN(PAGE::"Transfer Estimate to Service", Rec);
                               END;
                                }
      { 1100529041;3 ;Action    ;
                      Name=GenerateSubEstimateByModel;
                      CaptionML=ENU=Generate Sub-Estimate based on Model;
                      OnAction=BEGIN
                                 StartCopySubEstimateByModel(FALSE);  //C027729: db, 24-12-15
                               END;
                                }
      { 1100525006;3 ;Action    ;
                      Name=GenerateSummaryBySubEstimate;
                      CaptionML=ENU=Generate Summary By Sub-Estimate;
                      OnAction=VAR
                                 CopySheet@1100525000 : Page 11012239;
                               BEGIN
                                 //db, 25-06-15: C024158
                                 CopySheet.SetSelectionSummarySubEstimate("No.", "Summary (Cost)");
                                 CopySheet.GenerateSummary;
                                 CopySheet.SetSelectionSummarySubEstimate("No.", "Summary (Sales)");
                                 CopySheet.GenerateSummary;
                               END;
                                }
      { 1100529042;3 ;Action    ;
                      Name=Export CUF-XML budget;
                      CaptionML=ENU=Export CUF-XML budget;
                      RunObject=Page 11012393;
                      RunPageLink=No.=FIELD(No.) }
      { 1100529035;2 ;ActionGroup;
                      CaptionML=ENU=Update;
                      Image=RefreshText }
      { 1100529034;3 ;Action    ;
                      CaptionML=ENU=Update Norms and Prices;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateUpdateFunctions(1);
                               END;
                                }
      { 1100529033;3 ;Action    ;
                      CaptionML=ENU=Adjust Prices with &Percentage;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateUpdateFunctions(2);
                               END;
                                }
      { 1100529032;3 ;Action    ;
                      CaptionML=ENU=Update &Discount Percentage;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateUpdateFunctions(3);
                               END;
                                }
      { 1100529031;3 ;Action    ;
                      CaptionML=ENU=Update From Selected Quote;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateUpdateFunctions(4);
                               END;
                                }
      { 1100529030;3 ;Action    ;
                      CaptionML=ENU=Update &Recipies;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateUpdateFunctions(6);  //db, 18-01-13: DP00258
                               END;
                                }
      { 1100528906;3 ;Action    ;
                      CaptionML=ENU=Update Sales From Cost;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateUpdateFunctions(7);  //db, 14-01-15: C020101
                               END;
                                }
      { 1100529029;2 ;ActionGroup;
                      CaptionML=ENU=Substitute Collectively;
                      Image=RefreshText }
      { 1100529028;3 ;Action    ;
                      CaptionML=ENU=Substitute &Rate collectively;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateReplaceFunctions(1);
                               END;
                                }
      { 1100529027;3 ;Action    ;
                      CaptionML=ENU=Substitute &Norm Group collectively;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateReplaceFunctions(2);
                               END;
                                }
      { 1100529026;3 ;Action    ;
                      CaptionML=ENU=Substitute &Condition collectively;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateReplaceFunctions(3);
                               END;
                                }
      { 1100529025;3 ;Action    ;
                      CaptionML=ENU=Substitute Vendor collectively;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateReplaceFunctions(4);
                               END;
                                }
      { 1100529024;3 ;Action    ;
                      CaptionML=ENU=Substitute Discount Term Group collectively;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateReplaceFunctions(5);
                               END;
                                }
      { 1100529023;3 ;Action    ;
                      CaptionML=ENU=Substitute Item collectively;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateReplaceFunctions(6);
                               END;
                                }
      { 1100529022;3 ;Action    ;
                      CaptionML=ENU=Substitute Recipe collectively;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateReplaceFunctions(7);
                               END;
                                }
      { 1100528603;3 ;Action    ;
                      CaptionML=ENU=Substitute Currency Code collectively;
                      Image=RefreshText;
                      OnAction=BEGIN
                                 ActivateReplaceFunctions(8);
                               END;
                                }
      { 1100529021;2 ;ActionGroup;
                      CaptionML=ENU=Estimate;
                      Image=Calculate }
      { 1100529020;3 ;Action    ;
                      Name=Process Estimate;
                      CaptionML=ENU=Process Estimate;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=CalculatePlan;
                      PromotedCategory=Process;
                      OnAction=BEGIN
                                 UpdateMgt.UpdateTotals("No.", '', '', TRUE);
                               END;
                                }
      { 1100529043;3 ;Action    ;
                      Name=Calculate Removal Contribution;
                      CaptionML=ENU=Calculate Removal Contribution;
                      Image=CalculatePlanChange;
                      OnAction=BEGIN
                                 UpdateMgt.DetermineRemovalContribution(0, "No.", '', '', '', '', '');
                               END;
                                }
      { 1100529044;3 ;Action    ;
                      Name=Delete Zero Lines;
                      CaptionML=ENU=Delete Zero Lines;
                      Image=CancelLine;
                      OnAction=BEGIN
                                 ActivateUpdateFunctions(5);
                               END;
                                }
      { 1100529019;3 ;Action    ;
                      CaptionML=ENU=Reshuffle Estimate Lines;
                      Image=RefreshLines;
                      OnAction=BEGIN
                                 UpdateMgt.ReshuffleLines("No.");
                               END;
                                }
      { 1100529016;3 ;Action    ;
                      CaptionML=ENU=Initialize Adjustment Factor;
                      Image=CalculateWarehouseAdjustment;
                      OnAction=BEGIN
                                 TESTFIELD(Fixed, FALSE);
                                 UpdateMgt.ResetAdjustmentFactor("No.", '', '', '', 0, TRUE, 0, 0, 0);  //DP00555
                               END;
                                }
      { 1100529015;3 ;Action    ;
                      CaptionML=ENU=Round Item Quantity;
                      Image=Components;
                      OnAction=VAR
                                 UpdateRep@1210190000 : Report 11012335;
                               BEGIN
                                 //X007
                                 UpdateRep.SetSelection("No.");
                                 EstLineRec.SETRANGE("Estimate No.", "No.");
                                 UpdateRep.SETTABLEVIEW(EstLineRec);
                                 UpdateRep.RUNMODAL;
                                 CLEAR(UpdateRep);
                                 CurrPage.UPDATE(TRUE);
                               END;
                                }
      { 1100529014;3 ;Action    ;
                      CaptionML=ENU=Assign Purchase Actions;
                      Image=OrderTracking;
                      OnAction=VAR
                                 lvEstCompRec@1100525000 : Record 11012367;
                               BEGIN
                                 lvEstCompRec.QuickOrgPurchAction("No.");
                               END;
                                }
      { 1100529013;2 ;ActionGroup;
                      CaptionML=ENU=Coding;
                      Image=ItemTrackingLedger }
      { 1100529012;3 ;Action    ;
                      CaptionML=ENU=Estimate Lines;
                      Image=AllLines;
                      OnAction=BEGIN
                                 CheckUncodedLines(1);
                               END;
                                }
      { 1100529011;3 ;Action    ;
                      CaptionML=ENU=Recipe Lines;
                      Image=GetLines;
                      OnAction=BEGIN
                                 CheckUncodedLines(2);
                               END;
                                }
      { 1100529045;2 ;Action    ;
                      Name=Edit Compressed Estimate;
                      CaptionML=ENU=Edit Compressed Estimate;
                      Image=Compress;
                      OnAction=VAR
                                 OldEstLineRec@1100528900 : Record 11012154;
                               BEGIN
                                 IF Converted THEN BEGIN
                                   EstLineRec.SETRANGE("Estimate No.", "No.");
                                   REPORT.RUNMODAL(REPORT::"Select Estimate Lines NEW", TRUE, FALSE, EstLineRec);
                                 END ELSE BEGIN
                                   OldEstLineRec.SETRANGE("Estimate No.", "No.");
                                   REPORT.RUNMODAL(REPORT::"Select Estimate Lines", TRUE, FALSE, OldEstLineRec);
                                 END;
                               END;
                                }
      { 1100529009;2 ;Action    ;
                      Name=Edit Word Documents;
                      CaptionML=ENU=Edit Word Documents;
                      Image=DocumentEdit;
                      OnAction=BEGIN
                                 TESTFIELD("Contact No.");
                                 EditDocuments("Contact No.", "Contact Person No.", FALSE, '');
                               END;
                                }
      { 1100529050;0 ;ActionContainer;
                      ActionContainerType=Reports }
      { 1100529049;1 ;Action    ;
                      CaptionML=ENU=Estimate Reports;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report;
                      OnAction=BEGIN
                                 SetFilterPrintDoc(0);
                               END;
                                }
      { 1100529048;1 ;Action    ;
                      CaptionML=ENU=Sub-Estimate Reports;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report;
                      OnAction=BEGIN
                                 SetFilterPrintDoc(1);
                               END;
                                }
      { 1100529047;1 ;Action    ;
                      CaptionML=ENU=Estimate &Part Reports;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report;
                      OnAction=BEGIN
                                 SetFilterPrintDoc(2);
                               END;
                                }
      { 1100529046;1 ;Action    ;
                      CaptionML=ENU=Estimate &Lines Reports;
                      Promoted=Yes;
                      Image=Report;
                      PromotedCategory=Report;
                      OnAction=BEGIN
                                 SetFilterPrintDoc(3);
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1100528986;0;Container;
                ContainerType=ContentArea }

    { 1100528985;1;Group  ;
                CaptionML=ENU=General }

    { 1100528984;2;Field  ;
                SourceExpr="No.";
                OnAssistEdit=BEGIN
                               IF AssistEdit(xRec) THEN
                                 CurrPage.UPDATE;
                             END;
                              }

    { 1100528983;2;Field  ;
                SourceExpr=Description }

    { 1100528982;2;Field  ;
                SourceExpr="Description 2";
                Importance=Additional }

    { 1100528981;2;Field  ;
                SourceExpr=Address;
                Editable=TRUE }

    { 1100528980;2;Field  ;
                SourceExpr="Post Code";
                Editable=TRUE }

    { 1100528979;2;Field  ;
                SourceExpr=City;
                Editable=TRUE }

    { 1100528978;2;Field  ;
                SourceExpr="Country/Region Code" }

    { 1100528976;2;Field  ;
                SourceExpr=Estimator;
                OnValidate=BEGIN
                             CALCFIELDS("Name Estimator");
                           END;
                            }

    { 1100528975;2;Field  ;
                SourceExpr="Name Estimator";
                Importance=Additional;
                Editable=FALSE }

    { 1100528974;2;Field  ;
                SourceExpr="Purchaser Code";
                Importance=Additional }

    { 1100528973;2;Field  ;
                SourceExpr="Purchaser Name";
                Importance=Additional }

    { 1100528972;2;Field  ;
                SourceExpr="Consultancy Firm No.";
                Importance=Additional;
                OnValidate=BEGIN
                             CALCFIELDS("Consultancy Firm Name");
                           END;
                            }

    { 1100528971;2;Field  ;
                SourceExpr="Consultancy Firm Name";
                Importance=Additional;
                Editable=FALSE }

    { 1100528970;2;Field  ;
                SourceExpr="Contact No.";
                OnValidate=BEGIN
                             EvaluateRelation;  //db, 15-01-09
                           END;
                            }

    { 1100528969;2;Field  ;
                SourceExpr="Contact Name";
                Importance=Additional;
                Editable=FALSE }

    { 1100528968;2;Field  ;
                SourceExpr="Contact Person No.";
                Importance=Standard;
                OnValidate=BEGIN
                             CALCFIELDS("Contact Person Name");
                           END;
                            }

    { 1100528967;2;Field  ;
                SourceExpr="Contact Person Name";
                Importance=Additional;
                Editable=FALSE }

    { 1100528966;2;Field  ;
                SourceExpr="Customer No.";
                Importance=Promoted;
                OnValidate=BEGIN
                             EvaluateRelation;  //db, 15-01-09
                           END;
                            }

    { 1100528965;2;Field  ;
                SourceExpr="Customer Name";
                Importance=Promoted;
                Editable=FALSE }

    { 1100528964;2;Field  ;
                SourceExpr="Customer Disc. Group";
                Importance=Additional;
                OnValidate=BEGIN
                             IF "Estimate Type" = "Estimate Type"::Sales THEN BEGIN
                               CurrPage.SAVERECORD;
                               IF CONFIRM(Text001) = TRUE THEN BEGIN
                                 COMMIT;
                                 ActivateUpdateFunctions(1);
                               END;
                             END;
                           END;
                            }

    { 1100528963;2;Field  ;
                SourceExpr="Tender No." }

    { 1100528962;2;Field  ;
                SourceExpr="Order No. Customer";
                Importance=Additional }

    { 1100528961;2;Field  ;
                SourceExpr="Search Name" }

    { 1100528960;2;Field  ;
                SourceExpr="Territory Code";
                Importance=Additional }

    { 1100528959;2;Field  ;
                SourceExpr=Type;
                Importance=Additional }

    { 1100528958;2;Field  ;
                SourceExpr=Discipline;
                Importance=Additional }

    { 1100528957;2;Field  ;
                SourceExpr=Condition;
                Importance=Additional }

    { 1100528956;2;Field  ;
                SourceExpr="Global Dimension 1 Code";
                OnValidate=BEGIN
                             //**4PS Generated Code. Do Not Change.sn03
                             DPA_ChkDepartmentCodeAllowed(DPA_IsHardFilter);
                             //**4PS Generated Code.en03
                           END;
                            }

    { 1100528955;2;Field  ;
                SourceExpr=Status }

    { 1100528977;2;Field  ;
                SourceExpr=Converted;
                Editable=FALSE }

    { 1100409007;2;Field  ;
                SourceExpr="Language Code" }

    { 1100528954;1;Group  ;
                CaptionML=ENU=Data }

    { 1100528953;2;Field  ;
                SourceExpr="Creation Date";
                Importance=Promoted;
                Editable=FALSE }

    { 1100528952;2;Field  ;
                SourceExpr="Last Date Modified";
                Importance=Promoted;
                Editable=FALSE }

    { 1100528951;2;Field  ;
                SourceExpr="Last Time Modified";
                Editable=FALSE }

    { 1100528950;2;Field  ;
                SourceExpr="Modified by" }

    { 1100528949;2;Field  ;
                SourceExpr="Starting Date" }

    { 1100528948;2;Field  ;
                SourceExpr="Ending Date" }

    { 1100409006;2;Field  ;
                SourceExpr="Register Date" }

    { 1100528946;2;Field  ;
                SourceExpr="Tender Date" }

    { 1100528945;2;Field  ;
                SourceExpr="Reference Date (Rate)";
                Editable=FALSE }

    { 1100528944;2;Field  ;
                SourceExpr="Reference Date (Item)";
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             IF CONFIRM(Text001) = TRUE THEN BEGIN
                               COMMIT;
                               ActivateUpdateFunctions(1);
                             END;
                           END;
                            }

    { 1100528943;2;Field  ;
                DrillDown=No;
                SourceExpr="Reference Date (Customer)";
                Importance=Additional }

    { 1100528942;2;Field  ;
                DrillDown=No;
                SourceExpr="Reference Date (Company)";
                Importance=Additional }

    { 1100528941;2;Field  ;
                CaptionML=ENU=Purchase Discount Term Group (Company);
                SourceExpr=DiscountTermGroup0;
                Editable=FALSE }

    { 1100528940;2;Field  ;
                SourceExpr="Priority Purch Disc Term Grp 0";
                Importance=Additional }

    { 1100528939;2;Field  ;
                SourceExpr="Purch Discount Term Group 1";
                Importance=Additional;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             IF CONFIRM(Text001) = TRUE THEN BEGIN
                               COMMIT;
                               ActivateUpdateFunctions(1);
                             END;
                           END;
                            }

    { 1100528938;2;Field  ;
                SourceExpr="Priority Purch Disc Term Grp 1";
                Importance=Additional }

    { 1100528937;2;Field  ;
                SourceExpr="Purch Discount Term Group 2";
                Importance=Additional;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             IF CONFIRM(Text001) = TRUE THEN BEGIN
                               COMMIT;
                               ActivateUpdateFunctions(1);
                             END;
                           END;
                            }

    { 1100528936;2;Field  ;
                SourceExpr="Priority Purch Disc Term Grp 2";
                Importance=Additional }

    { 1100528935;2;Field  ;
                Name=DiscountTermGroup;
                CaptionML=ENU=Sales Discount Term Group (Company);
                SourceExpr=DiscountTermGroup0;
                Editable=FALSE }

    { 1100528934;2;Field  ;
                SourceExpr="Priority Sales Disc Term Grp 0";
                Importance=Additional }

    { 1100528933;2;Field  ;
                CaptionML=ENU=Sales Discount Term Group (Customer);
                SourceExpr="Sales Discount Term Group 1";
                Importance=Additional;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             IF CONFIRM(Text001) = TRUE THEN BEGIN
                               COMMIT;
                               ActivateUpdateFunctions(1);
                             END;
                           END;
                            }

    { 1100528932;2;Field  ;
                SourceExpr="Priority Sales Disc Term Grp 1";
                Importance=Additional }

    { 1100528931;2;Field  ;
                SourceExpr="Sales Discount Term Group 2";
                Importance=Additional;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                             IF CONFIRM(Text001) = TRUE THEN BEGIN
                               COMMIT;
                               ActivateUpdateFunctions(1);
                             END;
                           END;
                            }

    { 1100528930;2;Field  ;
                SourceExpr="Priority Sales Disc Term Grp 2";
                Importance=Additional }

    { 1100528929;2;Field  ;
                SourceExpr="Estimate Based On";
                Importance=Additional }

    { 1100525001;2;Field  ;
                SourceExpr="Apply Surcharge Recipe";
                Importance=Additional }

    { 1100528947;2;Field  ;
                SourceExpr="Surcharge % Labor" }

    { 1100528987;2;Field  ;
                SourceExpr="Surcharge % Material" }

    { 1100528988;2;Field  ;
                SourceExpr="Surcharge % Subcontracting" }

    { 1100528989;2;Field  ;
                SourceExpr="Surcharge % Plant" }

    { 1100528990;2;Field  ;
                SourceExpr="Surcharge % Sundry" }

    { 1100528991;2;Field  ;
                SourceExpr="Item Sales Price Based On";
                OnValidate=BEGIN
                             //db, 09-10-14: C018110
                             CurrPage.SAVERECORD;
                             IF CONFIRM(Text001) = TRUE THEN BEGIN
                               COMMIT;
                               ActivateUpdateFunctions(1);
                             END;
                           END;
                            }

    { 1100525007;2;Field  ;
                SourceExpr="Plant Rates in Hours" }

    { 1100525008;2;Field  ;
                SourceExpr="Plant Location";
                Importance=Promoted }

    { 1100525009;2;Field  ;
                SourceExpr="Kind of Plant Rate" }

    { 1100528928;1;Group  ;
                CaptionML=ENU=Other }

    { 1100525002;2;Field  ;
                SourceExpr="Rate Group";
                Editable=RateEditable }

    { 1100528926;2;Field  ;
                SourceExpr="Rate Code";
                Importance=Promoted;
                OnLookup=BEGIN
                           HandleLookupRateCode;  //db, 07-02-12: M32465
                         END;
                          }

    { 1100528925;2;Field  ;
                SourceExpr="Norm Group" }

    { 1100528927;2;Field  ;
                SourceExpr="Norm Group (Sales)" }

    { 1100528924;2;Field  ;
                SourceExpr="Recipe Group";
                OnLookup=BEGIN
                           LookupRecipeGroup;  //db, 07-02-14: C013041
                         END;
                          }

    { 1100528923;2;Field  ;
                SourceExpr="Part Group" }

    { 1100528922;2;Field  ;
                SourceExpr="Coding System";
                Importance=Additional }

    { 1100528921;2;Field  ;
                SourceExpr=Code;
                Importance=Additional }

    { 1100528601;2;Field  ;
                SourceExpr="Currency Code";
                Importance=Additional;
                OnValidate=BEGIN
                             //DP00883
                             CurrPage.SAVERECORD;
                             UpdateBudgetRate;
                           END;
                            }

    { 1100528602;2;Field  ;
                SourceExpr="Report Currency Code";
                Importance=Additional }

    { 1100528920;2;Field  ;
                SourceExpr="Project No." }

    { 1100528919;2;Field  ;
                SourceExpr=Element }

    { 1100528992;2;Field  ;
                SourceExpr="Extension Contract" }

    { 1100528993;2;Field  ;
                SourceExpr="Project Planning Activity Code" }

    { 1100528918;2;Field  ;
                SourceExpr="Service Contract No.";
                Importance=Additional;
                OnLookup=BEGIN
                           LookupServiceContract;  //db, 24-10-08
                         END;
                          }

    { 1100528917;2;Field  ;
                SourceExpr="Service Location No.";
                Importance=Additional;
                OnLookup=BEGIN
                           LookupServiceLocation;
                         END;
                          }

    { 1100528916;2;Field  ;
                CaptionML=ENU=Try-Out;
                SourceExpr=GetTryOut(1);
                Editable=FALSE;
                OnLookup=BEGIN
                           ShowTryOut(1);
                         END;
                          }

    { 1100528915;2;Field  ;
                CaptionML=ENU=Try-Out Quote;
                SourceExpr=GetTryOut(2);
                Editable=FALSE;
                OnLookup=BEGIN
                           ShowTryOut(2);
                         END;
                          }

    { 1100528914;2;Field  ;
                SourceExpr="Estimate Source" }

    { 1100528913;2;Field  ;
                SourceExpr="Summary Source (Cost)" }

    { 1100528994;2;Field  ;
                SourceExpr="Summary Source (Sales)" }

    { 1100528995;2;Field  ;
                SourceExpr="Summary (Cost)" }

    { 1100528912;2;Field  ;
                SourceExpr="Summary (Sales)" }

    { 1100525005;2;Field  ;
                SourceExpr="Offer Price Based On";
                Importance=Additional }

    { 1100525003;2;Field  ;
                SourceExpr="Margin % (Offer Price)";
                Importance=Additional }

    { 1100525004;2;Field  ;
                SourceExpr="Markup % (Offer Price)";
                Importance=Additional }

    { 1100528910;2;Field  ;
                SourceExpr=Finished }

    { 1100528909;2;Field  ;
                SourceExpr=Fixed;
                OnValidate=BEGIN
                             CurrPage.SAVERECORD;
                           END;
                            }

    { 1100528908;2;Field  ;
                SourceExpr="Copy Part Lines" }

    { 1100528901;1;Group  ;
                CaptionML=ENU=Text }

    { 1100528900;2;Field  ;
                SourceExpr=Text;
                MultiLine=Yes }

    { 1100409005;0;Container;
                ContainerType=FactBoxArea }

    { 1100409004;1;Part   ;
                Name=RegisterExternalDocumentFB;
                PagePartID=Page11125053;
                PartType=Page }

    { 1100409003;1;Part   ;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page11130167;
                PartType=Page }

    { 1100409002;1;Part   ;
                SubPageLink=No.=FIELD(No.);
                PagePartID=Page11229319;
                PartType=Page }

    { 1100409001;1;Part   ;
                Visible=FALSE;
                PartType=System;
                SystemPartID=RecordLinks }

    { 1100409000;1;Part   ;
                PartType=System;
                SystemPartID=Notes }

  }
  CODE
  {
    VAR
      EstSetup@1100528913 : Record 11012150;
      EstRec@1100528912 : Record 11012151;
      EstPartRec@1100528911 : Record 11072073;
      EstLineRec@1100528910 : Record 11072072;
      RcpLineRec@1100528909 : Record 11072075;
      PrintDoc@1100528908 : Codeunit 229;
      CUGraph@1100528907 : Codeunit 11012019;
      UpdateMgt@1100528906 : Codeunit 11012229;
      RateEditable@1100528905 : Boolean INDATASET;
      DepAuthRec@1100528904 : Record 11012466;
      DiscountTermGroup0@1100528903 : Code[10];
      DiscountTermGroup1@1100528916 : Code[10];
      DPA_IsHardFilter@1100528902 : Boolean;
      TotalCost@1100528901 : Decimal;
      TotalSales@1100528900 : Decimal;
      GeneratedtTxtConst1@1100528915 : TextConst 'ENU=You are not authorized for Department Code %1.';
      Text001@1100528914 : TextConst 'ENU=Do you want to actualize prices ?';

    PROCEDURE CheckUncodedLines@1210190000(lvAction@1210190000 : Integer);
    VAR
      UpdateMgt@1100525000 : Codeunit 11012229;
    BEGIN
      TESTFIELD("No.");
      UpdateMgt.CheckUncodedLines(lvAction, "No.",TRUE);  //db, 01-11-13: DP00260 (14518)
    END;

    PROCEDURE SetfilterEstimate@1100485000(lvEst@1210190000 : Code[20]);
    BEGIN
      FILTERGROUP(2);
      SETRANGE("No.",lvEst);
      FILTERGROUP(0);
    END;

    PROCEDURE ActivateUpdateFunctions@1100485001(lvAction@1100485000 : Integer);
    VAR
      UpdateReport@1100485001 : Report 11012341;
    BEGIN
      UpdateReport.FillDefaults("No.", lvAction);
      EstLineRec.SETRANGE("Estimate No.", "No.");
      UpdateReport.SETTABLEVIEW(EstLineRec);
      UpdateReport.RUNMODAL;
      CLEAR(UpdateReport);
      CurrPage.UPDATE(FALSE);  //db, 21-03-14
    END;

    PROCEDURE ActivateReplaceFunctions@1100525000(lvAction@1100485000 : Integer);
    VAR
      ReplaceReport@1100485001 : Report 11012342;
    BEGIN
      ReplaceReport.FillDefaults("No.", lvAction);
      EstLineRec.SETRANGE("Estimate No.", "No.");
      ReplaceReport.SETTABLEVIEW(EstLineRec);
      ReplaceReport.RUNMODAL;
      CLEAR(ReplaceReport);
      CurrPage.UPDATE(FALSE);  //db, 21-03-14
    END;

    PROCEDURE SetFilterPrintDoc@1100485002(lvAction@1100485000 : Integer);
    VAR
      EstPartRec@1100485002 : Record 11072073;
      PrintDoc@1100485001 : Codeunit 229;
    BEGIN
      EstPartRec."Estimate No." := "No.";
      PrintDoc.PrintEstimateNEW(EstPartRec, lvAction);   //DP00381
    END;

    PROCEDURE EvaluateRelation@1100525002();
    BEGIN
      //db, 15-01-09
      CurrPage.SAVERECORD;
      CheckRateConditions;
      CurrPage.UPDATE(FALSE);  //db, 21-03-14
    END;

    PROCEDURE HandleLookupRateCode@1210190002();
    BEGIN
      //db, 07-02-12: M32465
      CurrPage.SAVERECORD;
      COMMIT;
      LookupRateCode;
    END;

    PROCEDURE DrillDownCostType@1100528900(iType@1100528900 : Integer);
    BEGIN
      //DP00381
      EstLineRec.RESET;
      EstLineRec.SETRANGE("Estimate No.","No.");
      IF iType = 0 THEN
        EstLineRec.SETFILTER("Labor Cost Amount",'<>%1',0);
      IF iType = 1 THEN
        EstLineRec.SETFILTER("Material Cost Amount",'<>%1',0);
      IF iType = 2 THEN
        EstLineRec.SETFILTER("Subcontracting Cost Amount",'<>%1',0);
      IF iType = 3 THEN
        EstLineRec.SETFILTER("Plant Cost Amount",'<>%1',0);
      IF iType = 4 THEN
        EstLineRec.SETFILTER("Sundry Cost Amount",'<>%1',0);
      IF iType = 8 THEN
        EstLineRec.SETFILTER(Hours,'<>%1',0);
      IF iType = 9 THEN
        EstLineRec.SETFILTER("Cost Amount",'<>%1',0);

      IF iType = 10 THEN
        EstLineRec.SETFILTER("Labor Sales Amount",'<>%1',0);
      IF iType = 11 THEN
        EstLineRec.SETFILTER("Material Sales Amount",'<>%1',0);
      IF iType = 12 THEN
        EstLineRec.SETFILTER("Subcontracting Sales Amount",'<>%1',0);
      IF iType = 13 THEN
        EstLineRec.SETFILTER("Plant Sales Amount",'<>%1',0);
      IF iType = 14 THEN
        EstLineRec.SETFILTER("Sundry Sales Amount",'<>%1',0);
      IF iType = 18 THEN
        EstLineRec.SETFILTER("Hours (Sales)",'<>%1',0);
      IF iType = 19 THEN
        EstLineRec.SETFILTER("Sales Amount",'<>%1',0);

      PAGE.RUN(PAGE::"Estimate Line List NEW", EstLineRec);
    END;

    BEGIN
    END.
  }
}

